siac.Certificacao=siac.Certificacao||{};siac.Certificacao.Gerar=function(){function n(){$(".ui.dropdown").dropdown();$(".ui.modal").modal();$(".ui.termo.modal").modal("show");$(".cancelar.button").popup({on:"click"});$(".ui.confirmar.modal").modal({onApprove:function(){$("form").addClass("loading").submit()}});$(".prosseguir.button").click(function(){t()});$("#ddlDisciplina").change(function(){r(this.value)});$("#ddlTipo").change(function(){u(this.value)})}function t(){var t=$("form .error.message .list"),n;t.html("");$("form").removeClass("error");n=!0;$("#ddlDisciplina").val()||(t.append("<li>Selecione uma disciplina<\/li>"),n=!1);$("#ddlTemas").val()||(t.append("<li>Selecione ao menos um tema<\/li>"),n=!1);$("#ddlTipo").val()||(t.append("<li>Selecione o tipo das questões da sua avaliação acadêmica<\/li>"),n=!1);$("#ddlTipo").val()!=1&&$("#ddlTipo").val()!=3||$("#txtQteObjetiva").val()||(t.append("<li>Indique a quantidade das questões objetivas<\/li>"),n=!1);$("#ddlTipo").val()!=2&&$("#ddlTipo").val()!=3||$("#txtQteDiscursiva").val()||(t.append("<li>Indique a quantidade das questões discursivas<\/li>"),n=!1);$("#ddlDificuldade").val()||(t.append("<li>Selecione a dificuldade das questões<\/li>"),n=!1);n?i():($("form").addClass("error"),$("html, body").animate({scrollTop:$("form .error.message").offset().top},1e3))}function i(){$modal=$(".ui.confirmar.modal");$ddlDisciplina=$("#ddlDisciplina :selected");$ddlTipo=$("#ddlTipo");$table=$modal.find("tbody").html("");$tr=$("<tr><\/tr>");$tdDisciplina=$("<td><\/td>").html("<b>"+$ddlDisciplina.text()+"<\/b>");$tdTemas=$('<td class="ui labels"><\/td>');$ddlTemas=$("#ddlTemas :selected");for(var n=0;n<$ddlTemas.length;n++)$tdTemas.append($('<div class="ui tag label"><\/div>').text($ddlTemas.eq(n).text()));$tdQteQuestoes=$('<td class="ui labels"><\/td>');($ddlTipo.val()==1||$ddlTipo.val()==3)&&$tdQteQuestoes.append($('<div class="ui label"><\/div>').html('Objetiva<div class="detail">'+$("#txtQteObjetiva").val()+"<\/div>"));($ddlTipo.val()==2||$ddlTipo.val()==3)&&$tdQteQuestoes.append($('<div class="ui label"><\/div>').html('Discursiva<div class="detail">'+$("#txtQteDiscursiva").val()+"<\/div>"));$tdDificuldade=$("<td><\/td>").text($("#ddlDificuldade :selected").text());$table.append($tr.append($tdDisciplina).append($tdTemas).append($tdQteQuestoes).append($tdDificuldade));$modal.modal("show")}function r(n){var i=$("#ddlDisciplinas"),t=$("#ddlTemas");t.parent().addClass("loading");$.ajax({type:"POST",url:"/Tema/RecuperarTemasPorCodDisciplinaTemQuestao",data:{codDisciplina:n},success:function(n){t.html("");t.val(t.prop("defaultSelected"));$.each(n,function(n,i){t.append('<option value="'+i.CodTema+'">'+i.Descricao+"<\/option>")});t.parent().removeClass("loading")},error:function(){siac.mensagem("Erro no carregamento de Temas","Erro");t.parent().removeClass("loading")}})}function u(n){var t=$("#txtQteObjetiva"),i=$("#txtQteDiscursiva");n==1?(t.prop("disabled",!1),i.prop("disabled",!0)):n==2?(t.prop("disabled",!0),i.prop("disabled",!1)):(t.prop("disabled",!1),i.prop("disabled",!1))}return{iniciar:n}}();