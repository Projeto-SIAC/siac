siac.Questao=siac.Questao||{};siac.Questao.Index=function(){function a(){$(".ui.dropdown").dropdown();$(".pesquisa input").keyup(function(){var i=this;f&&clearTimeout(f);f=setTimeout(function(){c=i.value;n=1;t()},500)});$(".button.topo").click(function(){v()});$(".tipo.item").click(function(){var u=$(this),e,f,r,o;if(n=1,e=u.attr("data-tipo"),u.hasClass("active")){for(f=i,i=[],r=0,o=f.length;r<o;r++)f[r]!=e&&i.push(f[r]);u.removeClass("active")}else i.push(e),u.addClass("active");t()});$(".dificuldade.item").click(function(){var i=$(this);n=1;h=i.attr("data-dificuldade");t()});$(".disciplina.item").click(function(){var i=$(this);n=1;u=i.attr("data-disciplina");u||(e="");t()});$(".tema.item").click(function(){var i=$(this);n=1;u=i.parents("[data-disciplina]").attr("data-disciplina");e=i.attr("data-tema");t()});$(".ordenar.item").click(function(){var i=$(this);n=1;s=i.attr("data-ordenar");t();$(".ordenar.item").removeClass("active");i.addClass("active")});$(window).scroll(function(){$(window).scrollTop()+$(window).height()>$(document).height()-100&&$(".cards .card").length==l*n&&(n++,t())});t()}function t(){r&&r.readyState!=4&&r.abort();$cards=$(".ui.cards");$cards.parent().addClass("loading");r=$.ajax({url:"/Historico/Questao/Listar",data:{pagina:n,ordenar:s,dificuldade:h,disciplina:u,tema:e,tipos:i,pesquisa:c},method:"POST",success:function(t){t!=o&&(n==1?$cards.html(t):$cards.append(t),o=t)},complete:function(){$cards.parent().removeClass("loading")}})}function v(){return $("html, body").animate({scrollTop:0},500),!1}var f,o,l=10,r,n=1,s="data_desc",h="",u="",e="",i=[],c="";return{iniciar:a}}();siac.Questao.Cadastrar=function(){function r(){$(".ui.checkbox").checkbox();$(".ui.accordion").accordion({animateChildren:!1});$(".ui.dropdown").dropdown();$(".tabular.menu .item").tab();$(".ui.termo.modal").modal({closable:!1,onApprove:function(){$("#btnPesquisa").popup("show")}}).modal("show");$(".cancelar.button").popup({on:"click"});$(".ui.confirmar.modal").modal({onApprove:function(){return $(".ui.confirmar.modal .approve").addClass("loading"),w(),!1}});$(".ui.confirmar.modal .ui.accordion").accordion({animateChildren:!1,onChange:function(){$(".ui.confirmar.modal").modal("refresh")}});$("#btnPesquisa").popup({title:"Pesquisar quest\u00e3o",content:"Clique aqui para descobrir se sua quest\u00e3o j\u00e1 foi cadastrada",duration:100});$(".ui.pesquisa.modal").modal();$(".tabular.menu .item").tab({history:!0,historyType:"state",path:window.location.pathname});n();t();for(var r=0;r<5;r++)i();$(".prosseguir.button").click(function(){a()});$("#btnPesquisa").click(function(){$(".ui.pesquisa.modal").modal("show")});$(".pesquisa.modal .pesquisar.button").click(function(){return y($("#txtPalavraChave").val()),!1});$(".captcha.icon").click(function(){b()});$("#ddlDisciplina").change(function(){u()});$("#ddlTipo").change(function(){n()});$("#chkAnexos").change(function(){t()});$(".questao.objetiva .adicionar.button").click(function(){i()});$(".anexos .adicionar.button").click(function(){h()});$(".ui.shape").shape({onChange:function(){$(".pesquisa.modal").modal("refresh")}})}function u(){var t=$("#ddlDisciplina :selected").val(),n=$("#ddlTema");n.parent().addClass("loading");$.ajax({cache:!1,type:"POST",url:"/Tema/RecuperarTemasPorCodDisciplina",data:{codDisciplina:t},success:function(t){n.html("");n.parent().find(".label").remove();$.each(t,function(t,i){n.append($("<option><\/option>").val(i.CodTema).html(i.Descricao))});n.parent().removeClass("loading")},error:function(){siac.mensagem("Falha ao recuperar temas.");n.parent().removeClass("loading")}})}function n(){var n=$("#ddlTipo :selected").val();$(".questao").hide();n==1?($(".questao.objetiva").show(),$(".segment.questao.objetiva").attr("style","")):n==2&&$(".questao.discursiva").show()}function t(){var n=$("#chkAnexos");n.is(":checked")?($(".anexos").show(),$(".segment.anexos").attr("style","")):$(".anexos").hide()}function f(n){$chk=$(n);$lstCheckboxes=$('.ui.alternativas.accordion .content input[type="checkbox"]');$(".ui.alternativas.accordion .title .label").attr("style","display:none");for(var t=0;t<$lstCheckboxes.length;t++)if($chk.is(":checked")){if($chk.attr("id")==$lstCheckboxes.eq(t).attr("id")){$(".ui.alternativas.accordion .title.active .label").removeAttr("style");continue}$lstCheckboxes.eq(t).attr({readonly:"readonly",disabled:"disabled"});$lstCheckboxes.eq(t).parent().addClass("disabled")}else $lstCheckboxes.eq(t).removeAttr("readonly disabled"),$lstCheckboxes.eq(t).parent().removeClass("disabled")}function e(n){var r=$(n).parent().parent().parent().prev().find("#txtAnexoIndex").val(),u=$("#preImagem"+r),t=$("#fleAnexo"+r)[0].files[0],i=new FileReader;t.size<1e6?(i.onloadend=function(){u.attr("src",i.result)},t?i.readAsDataURL(t):preview.attr("src","")):siac.mensagem("Selecione um arquivo menor.")}function i(){var n=$(".ui.alternativas.accordion .title").length+1;$(".ui.alternativas.accordion").append('                        <div class="title">                            <input id="txtAlternativaIndex" value="'+n+'" hidden />                            <i class="dropdown icon"><\/i>Alternativa '+n+'                            <div class="ui small label" style="display:none">Correta<\/div>                        <\/div>                        <div class="content ui segment">                            <div class="field required">                                <label for="txtAlternativaEnunciado'+n+'">Enunciado<\/label>                                <textarea id="txtAlternativaEnunciado'+n+'" name="txtAlternativaEnunciado'+n+'" rows="2" placeholder="Enunciado..."><\/textarea>                            <\/div>                            <div class="field">                                <label for="txtAlternativaComentario'+n+'">Coment\u00e1rio<\/label>                                <textarea id="txtAlternativaComentario'+n+'" name="txtAlternativaComentario'+n+'" rows="2" placeholder="Coment\u00e1rio..."><\/textarea>                            <\/div>                            <div class="field">                                <div class="ui toggle checkbox">                                    <input id="chkAlternativaCorreta'+n+'" name="chkAlternativaCorreta'+n+'" type="checkbox" tabindex="0" class="hidden">                                    <label for="chkAlternativaCorreta'+n+'">Correta<\/label>                                <\/div>                            <\/div>                            <div class="field">                                <div class="ui button">                                    Remover                                <\/div>                                <div class="ui special popup">                                    <div class="header">Tem certeza?<\/div>                                    <div class="content"><p>Essa a\u00e7\u00e3o n\u00e3o poder\u00e1 ser desfeita.<\/p>                                    <div class="ui right aligned remover button tiny">Sim, remover<\/div>                                <\/div>                            <\/div>                        <\/div>                    <\/div>');$("#txtQtdAlternativas").val($(".ui.alternativas.accordion .title").length);$('[id^="chkAlternativaCorreta"]').off().change(function(){f(this)});$(".ui.alternativas.accordion .remover.button").off().click(function(){s(this)});$(".ui.checkbox").checkbox();$(".ui.alternativas.accordion .button").popup({inline:!0,on:"click",position:"right center"})}function o(){for(var t,r=$(".ui.alternativas.accordion .title"),i=$(".ui.alternativas.accordion .content.segment"),n=0;n<r.length;n++)t=r.eq(n).find("#txtAlternativaIndex").val(),r.eq(n).html('<input id="txtAlternativaIndex" value="'+(n+1)+'" hidden /><i class="dropdown icon"><\/i>Alternativa '+(n+1)+'<div class="ui small label" style="display:none">Correta<\/div>'),i.eq(n).find('input[name="chkAlternativaCorreta'+t+'"]').is(":checked")&&r.eq(n).find(".label").removeAttr("style"),i.eq(n).find('label[for="txtAlternativaEnunciado'+t+'"]').attr("for","txtAlternativaEnunciado"+(n+1)),i.eq(n).find('label[for="txtAlternativaComentario'+t+'"]').attr("for","txtAlternativaComentario"+(n+1)),i.eq(n).find('label[for="chkAlternativaCorreta'+t+'"]').attr("for","chkAlternativaCorreta"+(n+1)),i.eq(n).find('textarea[name="txtAlternativaEnunciado'+t+'"]').attr("name","txtAlternativaEnunciado"+(n+1)).attr("id","txtAlternativaEnunciado"+(n+1)),i.eq(n).find('textarea[name="txtAlternativaComentario'+t+'"]').attr("name","txtAlternativaComentario"+(n+1)).attr("id","txtAlternativaComentario"+(n+1)),i.eq(n).find('input[name="chkAlternativaCorreta'+t+'"]').attr("name","chkAlternativaCorreta"+(n+1)).attr("id","chkAlternativaCorreta"+(n+1))}function s(n){var r=$(".ui.alternativas.accordion .title").length,t,i;r>2&&(t=$(n).parent().parent().parent().parent(),i=$(t).prev(),i.remove(),t.remove(),o());$("#txtQtdAlternativas").val($(".ui.alternativas.accordion .title").length)}function h(){var t=$("#ddlTiposAnexo").val(),i=$("#ddlTiposAnexo :selected").text(),n=$(".ui.anexos.accordion .title").length+1;t==1&&$(".ui.anexos.accordion").append('                        <div class="title">                            <input id="txtAnexoIndex" value="'+n+'" class="disabled" readonly hidden/>                            <input name="txtAnexoTipo'+n+'" id="txtAnexoTipo'+n+'" value="'+t+'" hidden />                            <i class="dropdown icon"><\/i>Anexo '+n+'                            <span class="ui label" id="txtAnexoTipoDescricao">'+i+'<\/span>                        <\/div>                        <div class="content ui segment">                            <div class="field required">                                <div class="ui card"><div class="image"><img name="preImagem'+n+'" id="preImagem'+n+'" alt="Previsualiza\u00e7\u00e3o" src="" /><\/div>                                <input id="fleAnexo'+n+'" name="fleAnexo'+n+'"type="file" class="ui button" accept="image/*" /><\/div>                            <\/div>                            <div class="field required">                                <label for="txtAnexoLegenda'+n+'">Legenda<\/label>                                <textarea maxlength="250" id="txtAnexoLegenda'+n+'" name="txtAnexoLegenda'+n+'" rows="2" placeholder="Legenda..."><\/textarea>                            <\/div>                            <div class="field">                                <label for="txtAnexoFonte'+n+'">Fonte<\/label>                                <input maxlength="250" type="text" id="txtAnexoFonte'+n+'" name="txtAnexoFonte'+n+'" placeholder="Fonte..."><\/textarea>                            <\/div>                            <div class="field">                                <div class="ui button">                                    Remover                                <\/div>                                <div class="ui special popup">                                    <div class="header">Tem certeza?<\/div>                                    <div class="content"><p>Essa a\u00e7\u00e3o n\u00e3o poder\u00e1 ser desfeita.<\/p>                                    <div class="ui right aligned remover button tiny">Sim, remover<\/div>                                <\/div>                            <\/div>                        <\/div>                    <\/div>');$('.anexos.accordion [id^="fleAnexo"]').off().change(function(){e(this)});$("#txtQtdAnexos").val($(".ui.anexos.accordion .title").length);$(".anexos.accordion .remover.button").off().click(function(){l(this)});$(".ui.anexos.accordion .button").popup({inline:!0,on:"click",position:"right center"})}function c(){for(var r=$(".ui.anexos.accordion .title"),i=$(".ui.anexos.accordion .content.segment"),n=0;n<r.length;n++){var t=r.eq(n).find("#txtAnexoIndex").val(),u=r.eq(n).find("#txtAnexoTipo"+t).val(),f=r.eq(n).find("#txtAnexoTipoDescricao").text();r.eq(n).html('<input id="txtAnexoIndex" value="'+(n+1)+'" class="disabled" readonly hidden/><i class="dropdown icon"><\/i>Anexo '+(n+1)+'<input name="txtAnexoTipo'+(n+1)+'" id="txtAnexoTipo'+(n+1)+'" value="'+u+'" hidden /><span class="ui label" id="txtAnexoTipoDescricao">'+f+"<\/span>");i.eq(n).find('label[for="txtAnexoLegenda'+t+'"]').attr("for","txtAlternativaEnunciado"+(n+1));i.eq(n).find('label[for="txtAnexoFonte'+t+'"]').attr("for","txtAlternativaComentario"+(n+1));i.eq(n).find('textarea[name="txtAnexoLegenda'+t+'"]').attr("name","txtAnexoLegenda"+(n+1)).attr("id","txtAnexoLegenda"+(n+1));i.eq(n).find('input[name="txtAnexoFonte'+t+'"]').attr("name","txtAnexoFonte"+(n+1)).attr("id","txtAnexoFonte"+(n+1));i.eq(n).find('input[name="fleAnexo'+t+'"]').attr("name","fleAnexo"+(n+1)).attr("id","fleAnexo"+(n+1));i.eq(n).find('img[name="preImagem'+t+'"]').attr("name","preImagem"+(n+1)).attr("id","preImagem"+(n+1))}}function l(n){var t=$(n).parent().parent().parent().parent(),i=$(t).prev();i.remove();t.remove();c();$("#txtQtdAnexos").val($(".ui.anexos.accordion .title").length)}function a(){var i,u,f,t,r,n;if($(".ui.error.message .list").html(""),i=!1,$("#ddlDisciplina").val()||$(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio selecionar uma disciplina<\/li>"),!$("#ddlTema :selected").length>0&&$(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio selecionar pelo menos um tema<\/li>"),$("#ddlDificuldade").val()||$(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio selecionar uma dificuldade<\/li>"),$("#ddlTipo").val()||$(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio selecionar um tipo<\/li>"),$("#txtEnunciado").val()||$(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio preencher o enunciado<\/li>"),$("#ddlTipo").val())if(u=$("#ddlTipo").val(),u==1){for(f=$("#txtQtdAlternativas").val(),t=!0,n=0;n<f;n++)$("#txtAlternativaEnunciado"+(n+1)).val()==""&&(t=!1);if(t){for(t=!1,n=0;n<f;n++)$("#chkAlternativaCorreta"+(n+1)).is(":checked")&&(t=!0);if(t)if($("#chkAnexos").is(":checked")){for(r=$("#txtQtdAnexos").val(),n=0;n<r;n++)$("#fleAnexo"+(n+1))[0].files.length==0&&(t=!1);t?i=!0:$(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio selecionar os arquivos dos anexos<\/li>")}else i=!0;else $(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio selecionar pelo menos umas das alternativas como correta<\/li>")}else $(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio preencher os enunciados de todas as alternativas<\/li>")}else if(u==2)if($("#txtChaveDeResposta").val()!="")if($("#chkAnexos").is(":checked")){for(t=!0,r=$("#txtQtdAnexos").val(),n=0;n<r;n++)$("#fleAnexo"+(n+1))[0].files.length==0&&(t=!1);t?i=!0:$(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio selecionar os arquivos dos anexos<\/li>")}else i=!0;else $(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio preencher a chave de resposta<\/li>");i?v():$("#frmQuestao").addClass("error")}function v(){var t,i,r,u,n,f;for($("#mdlDisciplina").text($("#ddlDisciplina :selected").text()),$("#mdlDificuldade").text($("#ddlDificuldade :selected").text()),t=$("#ddlTema :selected"),$("#mdlTagTemas").html(""),n=0;n<t.length;n++)$("#mdlTagTemas").append('<div class="ui tag label">'+t.eq(n).text()+"<\/div>");if($("#mdlEnunciado").text($("#txtEnunciado").val()).attr("data-html","<b>Objetivo<\/b>: "+$("#txtObjetivo").val()),i=$("#ddlTipo").val(),i==1){for(r=$("#txtQtdAlternativas").val(),$("#mdlListAlternativas").html(""),n=0;n<r;n++){if($("#chkAlternativaCorreta"+(n+1)).is(":checked")){$("#mdlListAlternativas").append('<div class="item">                                    <div class="middle aligned content" data-html="<b>Coment\u00e1rio<\/b>: '+$("#txtAlternativaComentario"+(n+1)).val()+'">                                        <b>'+(n+1)+"<\/b>) "+$("#txtAlternativaEnunciado"+(n+1)).val()+'<a class="ui green label">Correta<\/a>                                    <\/div>                                <\/div>');continue}$("#mdlListAlternativas").append('<div class="item">                                    <div class="middle aligned content" data-html="<b>Coment\u00e1rio<\/b>: '+$("#txtAlternativaComentario"+(n+1)).val()+'">                                        <b>'+(n+1)+"<\/b>) "+$("#txtAlternativaEnunciado"+(n+1)).val()+"                                    <\/div>                                <\/div>")}$("#mdlChaveDeResposta").attr("style","display:none");$("#mdlListAlternativas").removeAttr("style")}else i==2&&($("#mdlChaveDeResposta").html("<i>"+$("#txtChaveDeResposta").val()+'<\/i><a class="ui green label">Chave de Resposta<\/a>').attr("data-html","<b>Coment\u00e1rio<\/b>: "+$("#txtComentario").val()),$("#mdlListAlternativas").attr("style","display:none"),$("#mdlChaveDeResposta").removeAttr("style"));if($("#chkAnexos").is(":checked")){for(u=$("#txtQtdAnexos").val(),$("#mdlCardAnexos").html(""),n=0;n<u;n++)f=$("#txtAnexoTipo"+(n+1)).val(),f==1&&$("#mdlCardAnexos").append('<div class="ui card">                                        <div class="image">                                            <img src="'+$("#preImagem"+(n+1)).attr("src")+'" />                                        <\/div>                                        <div class="content">                                            <div class="header">                                                '+$("#txtAnexoLegenda"+(n+1)).val()+'                                            <\/div>                                            <div class="description">                                                '+$("#txtAnexoFonte"+(n+1)).val()+"                                            <\/div>                                        <\/div>                                    <\/div>");$("#mdlAccordionAnexos").removeAttr("style")}else $("#mdlAccordionAnexos").attr("style","display:none");$(".ui.confirmar.modal").modal("show");$(".ui.confirmar.modal div").popup()}function y(n){n=n.toLowerCase();n.indexOf(";")>-1?n=n.split(";"):n[0]=n;$(".ui.pesquisa.modal .pesquisar").addClass("loading");$.ajax({type:"POST",data:{palavras:n},url:"/Dashboard/Questao/PalavrasChave",success:function(n){var i,t,r;if($(".ui.pesquisa.modal .pesquisar").removeClass("loading"),$("#divQuestoes").html(""),n.length!=0)for(i=$("#divQuestoes"),i.parent().find(".ui.resultado.label").remove(),i.parent().append('<div class="ui resultado label"> Resultado(s)<div class="detail">'+n.length+"<\/div><\/div>"),t=0,r=n.length;t<r;t++)i.append('                        <div class="item">                            <div class="content">                                <a data-questao="'+n[t].CodQuestao+'" class="header">'+n[t].Enunciado.encurtarTextoEm(140)+'<\/a>                                <div class="description ui labels">                                    <span class="ui label">'+n[t].Disciplina+'<\/span>                                    <span class="ui label">'+n[t].Dificuldade+'<\/span>                                    <span class="ui label">'+n[t].TipoQuestao+'<\/span>                                    <span class="ui label">'+n[t].Professor+"<\/span>                                <\/div>                            <\/div>                        <\/div>                        "),t<r-1&&i.append('                            <div class="ui horizontal divider">                                <i class="icon folder open"><\/i>                              <\/div>');else $("#divQuestoes").append('                        <div class="item">                            <div class="content">                            <div class="header">Nenhuma quest\u00e3o foi encontrada<\/div>                            <\/div>                        <\/div>                        ');$(".ui.pesquisa.modal").modal("refresh");$("a[data-questao]").click(function(){var n=$(this).attr("data-questao");p(n);$(".shape").shape("flip right")})},error:function(){siac.mensagem("Erro na pesquisa. Por favor, tente novamente.")}})}function p(n){n&&$.ajax({url:"/Dashboard/Questao/Apresentar",type:"POST",data:{codigo:n},success:function(n){$segment=$(".questao.segment");$segment.html(n);$segment.removeAttr("style");$segment.find(".ui.accordion").accordion({onChange:function(){$segment.parents(".modal").modal("refresh")}});$segment.parents(".modal").modal("refresh");$segment.parent().find(".voltar.button").off().click(function(){$(".shape").shape("flip left")})},complete:function(){$(".questao.segment").removeClass("loading")}})}function w(){$.ajax({type:"GET",data:{captcha:$("#txtCaptcha").val()},url:"/Dashboard/Questao/ChequeCaptcha",success:function(n){n=="true"?($(".ui.pesquisa.modal .pesquisar").removeClass("loading"),$(".ui.confirmar.modal").modal("hide"),$("#txtCaptcha").next().prop("class","checkmark green icon"),$("#frmQuestao").addClass("loading").submit()):($(".ui.pesquisa.modal .pesquisar").removeClass("loading"),$(".ui.confirmar.modal").modal("show"),$("#txtCaptcha").next().prop("class","remove red icon"))},error:function(){$(".ui.pesquisa.modal .pesquisar").removeClass("loading");$("#txtCaptcha").next().prop("class","remove icon");siac.mensagem("Ocorreu um erro ao verificar o captcha.","Resultado do Captcha")}})}function b(){$.ajax({type:"GET",url:"/Dashboard/Questao/NovoCaptcha",success:function(n){n&&$("#imgCaptcha").attr("src","data:image/png;base64,"+n)},error:function(){siac.mensagem("Ocorreu um erro ao atualizar o captcha, tente novamente.","Erro")}})}return{iniciar:r}}();siac.Questao.Detalhe=function(){function n(){$(".ui.accordion").accordion({animateChildren:!1});$("div,p").popup();$(".button").popup({on:"click"});$("a.card").click(function(){$card=$(this);src=$card.find("img").attr("src");legenda=$card.find(".header").text();fonte=$card.find(".description").text();$modal=$(".ui.anexo.modal");$modal.find(".header").text(legenda);$modal.find("img.image").attr("src",src);$modal.find(".description").html(fonte);$modal.modal("show")});$(".arquivar.button").click(function(){var n=$(this);n.addClass("loading");$.ajax({url:"/Historico/Questao/Arquivar/"+n.attr("data-questao"),type:"POST",success:function(t){t?n.addClass("active").text("Arquivada"):n.removeClass("active").text("Arquivar")},error:function(){siac.mensagem("Ocorreu um erro na tentativa de arquivar.","Erro inesperado")},complete:function(){n.removeClass("loading")}})})}return{iniciar:n}}();siac.Questao.Editar=function(){function i(){$elemento=$("#frmQuestao");n=$elemento.attr("data-questao-tipo");t=$elemento.attr("data-questao-anexo");$elemento.removeAttr("data-questao-tipo data-questao-anexo");$(".disabled").parent().popup({html:'<i class="icon red warning"><\/i>Este campo n\u00e3o pode ser modificado',variation:"wide"});$(".ui.checkbox").checkbox();$(".ui.accordion").accordion({animateChildren:!1});$(".ui.modal .ui.accordion").accordion({animateChildren:!1,onChange:function(){$(".ui.confirmar.modal").modal("refresh")}});$(".ui.dropdown").dropdown();$(".tabular.menu .item").tab({history:!0,historyType:"state",path:window.location.pathname});$(".cancelar.button").popup({on:"click"});$(".ui.confirmar.modal").modal({onApprove:function(){$("#frmQuestao").addClass("loading").submit()}});$(".prosseguir.button").click(function(){u()})}function r(){var r,i,u;if($("#mdlEnunciado").text($("#txtEnunciado").val()).attr("data-html","<b>Objetivo<\/b>: "+$("#txtObjetivo").val()),n==1){for(r=$(".alternativas .title").length,$("#mdlListAlternativas").html(""),i=0;i<r;i++){if($("#chkAlternativaCorreta"+(i+1)).is(":checked")){$("#mdlListAlternativas").append('<div class="item">                                    <div class="middle aligned content" data-html="<b>Coment\u00e1rio<\/b>: '+$("#txtAlternativaComentario"+(i+1)).val()+'">                                        <b>'+(i+1)+"<\/b>) "+$("#txtAlternativaEnunciado"+(i+1)).val()+'<a class="ui green label">Correta<\/a>                                    <\/div>                                <\/div>');continue}$("#mdlListAlternativas").append('<div class="item">                                    <div class="middle aligned content" data-html="<b>Coment\u00e1rio<\/b>: '+$("#txtAlternativaComentario"+(i+1)).val()+'">                                        <b>'+(i+1)+"<\/b>) "+$("#txtAlternativaEnunciado"+(i+1)).val()+"                                    <\/div>                                <\/div>")}$("#mdlChaveDeResposta").attr("style","display:none");$("#mdlListAlternativas").removeAttr("style")}else n==2&&($("#mdlChaveDeResposta").html("<i>"+$("#txtChaveDeResposta").val()+'<\/i><a class="ui green label">Chave de Resposta<\/a>').attr("data-html","<b>Coment\u00e1rio<\/b>: "+$("#txtComentario").val()),$("#mdlListAlternativas").attr("style","display:none"),$("#mdlChaveDeResposta").removeAttr("style"));if(t>0){for($("#mdlCardAnexos").html(""),i=0;i<t;i++)u=$("#txtAnexoTipo"+(i+1)).val(),u==1&&$("#mdlCardAnexos").append('<div class="ui card">                                        <div class="image">                                            <img src="'+$("#preImagem"+(i+1)).attr("src")+'" />                                        <\/div>                                        <div class="content">                                            <div class="header">                                                '+$("#txtAnexoLegenda"+(i+1)).val()+'                                            <\/div>                                            <div class="description">                                            '+$("#txtAnexoFonte"+(i+1)).val()+"                                            <\/div>                                        <\/div>                                    <\/div>");$("#mdlAccordionAnexos").removeAttr("style")}else $("#mdlAccordionAnexos").attr("style","display:none");$(".ui.confirmar.modal").modal("show");$(".ui.confirmar.modal div").popup()}function u(){var u,f,i,t;if($(".ui.error.message .list").html(""),u=!1,$("#txtEnunciado").val()!="")if(n==1){for(f=$(".alternativas .title").length,i=!0,t=0;t<f;t++)$("#txtAlternativaEnunciado"+(t+1)).val()==""&&(i=!1);if(i){for(i=!1,t=0;t<f;t++)$("#chkAlternativaCorreta"+(t+1)).is(":checked")&&(i=!0);i?u=!0:$(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio selecionar pelo menos umas das alternativas como correta<\/li>")}else $(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio preencher os enunciados de todas as alternativas<\/li>")}else n==2&&($("#txtChaveDeResposta").val()!=""?u=!0:$(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio preencher a chave de resposta<\/li>"));else $(".ui.error.message .list").append("<li>\u00c9 necess\u00e1rio preencher o enunciado<\/li>");u?r():$("#frmQuestao").addClass("error")}var n,t;return{iniciar:i}}();siac.Questao.Gerar=function(){function n(){$(".gerar.button").click(function(){t()})}function t(){$("div.ui.form").parent().addClass("loading");strQte=$("#txtQuantidade").val();$.ajax({type:"GET",url:"/Dashboard/Questao/Gerar",data:{strQte:strQte},success:function(n){var t,i;for($questoes=$("div.questoes"),$questoes.html(""),t=0;t<n.length;t++){for($questao=$('<div class="ui segment"><\/div>'),$labels=$('<div class="ui labels"><\/div>'),$labelProfessor=$('<div class="ui label">                                                Professor                                                <div class="detail">                                                    '+n[t].Professor+"                                                <\/div>                                            <\/div>"),$labelDisciplina=$('<div class="ui label">                                                Disciplina                                                <div class="detail">                                                    '+n[t].Disciplina+"                                                <\/div>                                            <\/div>"),$labelDificuldade=$('<div class="ui label" data-html="<b>Coment\u00e1rio<\/b>: '+n[t].Dificuldade.Comentario+'">                                                Dificuldade                                                <div class="detail">                                                    '+n[t].Dificuldade.Descricao+"                                                <\/div>                                            <\/div>"),$labels.append($labelProfessor).append($labelDisciplina).append($labelDificuldade),i=0;i<n[t].Tema.length;i++)$labels.append($('<div class="ui tag label" data-html="<b>Coment\u00e1rio<\/b>: '+n[t].Tema[i].Comentario+'"><\/div>').text(n[t].Tema[i].Descricao));if($enunciado=$('<div class="ui dividing header" data-html="<b>Objetivo<\/b>: '+n[t].Objetivo+'"><\/div>'),$enunciado.text(n[t].Enunciado),$questao.append($labels),$questao.append($enunciado),n[t].TipoQuestao==1){for($lstAlternativa=$('<div class="ui very relaxed list"><\/div>'),i=0;i<n[t].Alternativa.length;i++)$alternativa=$('<div class="item"><\/div>'),$content=$('<div class="middle aligned content" data-html="<b>Coment\u00e1rio<\/b>: '+n[t].Alternativa[i].Comentario+'">'),$content.append("<b>"+(i+1)+"<\/b>) "),$content.append(n[t].Alternativa[i].Enunciado),n[t].Alternativa[i].FlagGabarito&&n[t].Alternativa[i].FlagGabarito==!0&&$content.append('<a class="ui green label">Correta<\/a>'),$alternativa.append($content),$lstAlternativa.append($alternativa);$questao.append($lstAlternativa)}else $chaveDeResposta=$('<div data-html="<b>Coment\u00e1rio<\/b>: '+n[t].Comentario+'"><\/div>'),$chaveDeResposta.html('<a class="ui green ribbon label">Chave de Resposta<\/a>'+n[t].ChaveDeResposta),$questao.append($chaveDeResposta);$questoes.append($questao)}$("div,p").popup();$("div.ui.form").parent().removeClass("loading")},error:function(){$("div.ui.form").parent().removeClass("loading");siac.mensagem("Erro gerando as quest\u00f5es.")}})}return{iniciar:n}}();