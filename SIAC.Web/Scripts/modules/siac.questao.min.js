siac.Questao=siac.Questao||{};siac.Questao.Index=function(){function u(){$(".ui.global.loader").parent().addClass("active");$.ajax({url:"/Historico/Questao/Minhas",data:{pagina:i},method:"GET",success:function(n){$(".ui.cards").append(n)},complete:function(){$(".ui.global.loader").parent().removeClass("active")}});$(".button.mais").click(function(){var n=this;$(n).addClass("loading");f(n)})}function f(n){i++;$.ajax({url:"/Historico/Questao/Minhas",data:{pagina:i},method:"GET",success:function(n){$(".ui.cards").append(n)},complete:function(){$(n).removeClass("loading")}})}function e(){return $("html, body").animate({scrollTop:0},500),!1}function o(i){var e,o,h,f,c,s,l,u;if(i){for(i=i.toLowerCase().split(";"),n=[],e=0;e<i.length;e++)if(i[e]=i[e].trim(),i[e].indexOf("+")>-1){for(lstFiltro=t,termos=i[e].split("+"),f=0;f<termos.length;f++)if(termos[f]=termos[f].trim(),termos[f]){for(o=[],u=0;u<lstFiltro.length;u++)if(lstFiltro[u].Enunciado.toLowerCase().indexOf(termos[f])>-1)o.push(lstFiltro[u]);else if(lstFiltro[u].Disciplina.toLowerCase().indexOf(termos[f])>-1)o.push(lstFiltro[u]);else if(lstFiltro[u].TipoQuestao.toLowerCase().indexOf(termos[f])>-1)o.push(lstFiltro[u]);else if(lstFiltro[u].Dificuldade.toLowerCase().indexOf(termos[f])>-1)o.push(lstFiltro[u]);else if(lstFiltro[u].DtCadastro.toLowerCase().indexOf(termos[f])>-1)o.push(lstFiltro[u]);else for(h=0;h<lstFiltro[u].Temas.length;h++)if(lstFiltro[u].Temas[h].toLowerCase().indexOf(termos[f])>-1){o.push(lstFiltro[u]);break}lstFiltro=o}n=n.concat(lstFiltro)}else if(i[e])for(u=0;u<t.length;u++)if(t[u].Enunciado.toLowerCase().indexOf(i[e])>-1)n.push(t[u]);else if(t[u].Disciplina.toLowerCase().indexOf(i[e])>-1)n.push(t[u]);else if(t[u].TipoQuestao.toLowerCase().indexOf(i[e])>-1)n.push(t[u]);else if(t[u].Dificuldade.toLowerCase().indexOf(i[e])>-1)n.push(t[u]);else if(t[u].DtCadastro.toLowerCase().indexOf(i[e])>-1)n.push(t[u]);else for(f=0;f<t[u].Temas.length;f++)if(t[u].Temas[f].toLowerCase().indexOf(i[e])>-1){n.push(t[u]);break}for(c="",u=0;u<n.length;u++)if(c.indexOf(n[u].CodQuestao)==-1){c+=n[u].CodQuestao+";";continue}for(s=n,l="",n=[],u=0;u<s.length;u++)l.indexOf(s[u].CodQuestao)==-1&&c.indexOf(s[u].CodQuestao)>-1&&(n.push(s[u]),l+=s[u].CodQuestao+";")}else n=t;r()}function r(t){var f,i;$(".ui.cards").parent().addClass("loading");var r=20,u=n.length;for(t==null&&(t=1),f=t*r,f>u&&(f=u),$(".ui.cards").html(""),i=r*t-r;i<f;i++)$(".ui.cards").append('                        <a class="ui card" href="/Historico/Questao/'+n[i].CodQuestao+'">                            <div class="content">                                <div class="header">'+siac.Utilitario.encurtarTextoEm(n[i].Enunciado,140)+'<\/div>                                <div class="meta"><span title="'+n[i].DtCadastro+'">'+n[i].DtCadastroTempo+'<\/span><\/div>                                <div class="description ui labels">                                    <span class="ui label">'+n[i].Disciplina+'<\/span>                                    <span class="ui label">'+n[i].Dificuldade+'<\/span>                                    <span class="ui label">'+n[i].TipoQuestao+"<\/span>                                <\/div>                            <\/div>                        <\/a>                        ");for($(".ui.pagination.menu").html(""),i=t-3,i;i<=Math.ceil(u/r)-3&&$(".ui.pagination.menu .item").length<5;i++)if(!(i<1)){if(i==t){$(".ui.pagination.menu").append('<a class="active item" onclick="siac.Questao.Index.topo(); siac.Questao.Index.minhasQuestoes('+i+')">'+i+"<\/a>");continue}$(".ui.pagination.menu").append('<a class="item" onclick="siac.Questao.Index.topo(); siac.Questao.Index.minhasQuestoes('+i+')">'+i+"<\/a>")}if($(".ui.pagination.menu .item").length<5){for(i;$(".ui.pagination.menu .item").length<5&&i<=Math.ceil(u/r);i++)if(!(i<1)){if(i==t){$(".ui.pagination.menu").append('<a class="active item" onclick="siac.Questao.Index.topo(); siac.Questao.Index.minhasQuestoes('+i+')">'+i+"<\/a>");continue}$(".ui.pagination.menu").append('<a class="item" onclick="siac.Questao.Index.topo(); siac.Questao.Index.minhasQuestoes('+i+')">'+i+"<\/a>")}t==Math.ceil(u/r)&&(i-5<1||$(".ui.pagination.menu").prepend('<a class="item" onclick="siac.Questao.Index.topo(); siac.Questao.Index.minhasQuestoes('+(i-5)+')">'+(i-5)+"<\/a>"))}$(".ui.cards").parent().removeClass("loading")}var i=1,t,n;return{iniciar:u,topo:e,filtro:o,minhasQuestoes:r}}();siac.Questao.Cadastrar=function(){function r(){$(".ui.checkbox").checkbox();$(".ui.accordion").accordion({animateChildren:!1});$(".ui.dropdown").dropdown();$(".tabular.menu .item").tab();$(".ui.termo.modal").modal({closable:!1,onApprove:function(){$("#btnPesquisa").popup("show")}}).modal("show");$(".cancelar.button").popup({on:"click"});$(".ui.confirmar.modal").modal({onApprove:function(){return $(".ui.confirmar.modal .approve").addClass("loading"),p(),!1}});$(".ui.confirmar.modal .ui.accordion").accordion({animateChildren:!1,onChange:function(){$(".ui.confirmar.modal").modal("refresh")}});$("#btnPesquisa").popup({title:"Pesquisar questão",content:"Clique aqui para descobrir se sua questão já foi cadastrada",duration:100});$(".ui.pesquisa.modal").modal();n();t();for(var r=0;r<5;r++)i();$(".prosseguir.button").click(function(){a()});$("#btnPesquisa").click(function(){$(".ui.pesquisa.modal").modal("show")});$(".pesquisa.modal .pesquisar.button").click(function(){return y($("#txtPalavraChave").val()),!1});$(".captcha.icon").click(function(){w()});$("#ddlDisciplina").change(function(){u()});$("#ddlTipo").change(function(){n()});$("#chkAnexos").change(function(){t()});$(".questao.objetiva .adicionar.button").click(function(){i()});$(".anexos .adicionar.button").click(function(){h()})}function u(){var t=$("#ddlDisciplina :selected").val(),n=$("#ddlTema");n.parent().addClass("loading");$.ajax({cache:!1,type:"GET",url:"/Tema/RecuperarTemasPorCodDisciplina",data:{codDisciplina:t},success:function(t){n.html("");n.parent().find(".label").remove();$.each(t,function(t,i){n.append($("<option><\/option>").val(i.CodTema).html(i.Descricao))});n.parent().removeClass("loading")},error:function(){siac.mensagem("Falha ao recuperar temas.");n.parent().removeClass("loading")}})}function n(){var n=$("#ddlTipo :selected").val();$(".questao").hide();n==1?($(".questao.objetiva").show(),$(".segment.questao.objetiva").attr("style","")):n==2&&$(".questao.discursiva").show()}function t(){var n=$("#chkAnexos");n.is(":checked")?($(".anexos").show(),$(".segment.anexos").attr("style","")):$(".anexos").hide()}function f(n){$chk=$(n);$lstCheckboxes=$('.ui.alternativas.accordion .content input[type="checkbox"]');$(".ui.alternativas.accordion .title .label").attr("style","display:none");for(var t=0;t<$lstCheckboxes.length;t++)if($chk.is(":checked")){if($chk.attr("id")==$lstCheckboxes.eq(t).attr("id")){$(".ui.alternativas.accordion .title.active .label").removeAttr("style");continue}$lstCheckboxes.eq(t).attr({readonly:"readonly",disabled:"disabled"});$lstCheckboxes.eq(t).parent().addClass("disabled")}else $lstCheckboxes.eq(t).removeAttr("readonly disabled"),$lstCheckboxes.eq(t).parent().removeClass("disabled")}function e(n){var r=$(n).parent().parent().parent().prev().find("#txtAnexoIndex").val(),u=$("#preImagem"+r),t=$("#fleAnexo"+r)[0].files[0],i=new FileReader;t.size<1e6?(i.onloadend=function(){u.attr("src",i.result)},t?i.readAsDataURL(t):preview.attr("src","")):siac.mensagem("Selecione um arquivo menor.")}function i(){var n=$(".ui.alternativas.accordion .title").length+1;$(".ui.alternativas.accordion").append('                        <div class="title">                            <input id="txtAlternativaIndex" value="'+n+'" hidden />                            <i class="dropdown icon"><\/i>Alternativa '+n+'                            <div class="ui small label" style="display:none">Correta<\/div>                        <\/div>                        <div class="content ui segment">                            <div class="field required">                                <label for="txtAlternativaEnunciado'+n+'">Enunciado<\/label>                                <textarea id="txtAlternativaEnunciado'+n+'" name="txtAlternativaEnunciado'+n+'" rows="2" placeholder="Enunciado..."><\/textarea>                            <\/div>                            <div class="field">                                <label for="txtAlternativaComentario'+n+'">Comentário<\/label>                                <textarea id="txtAlternativaComentario'+n+'" name="txtAlternativaComentario'+n+'" rows="2" placeholder="Comentário..."><\/textarea>                            <\/div>                            <div class="field">                                <div class="ui toggle checkbox">                                    <input id="chkAlternativaCorreta'+n+'" name="chkAlternativaCorreta'+n+'" type="checkbox" tabindex="0" class="hidden">                                    <label for="chkAlternativaCorreta'+n+'">Correta<\/label>                                <\/div>                            <\/div>                            <div class="field">                                <div class="ui button">                                    Remover                                <\/div>                                <div class="ui special popup">                                    <div class="header">Tem certeza?<\/div>                                    <div class="content"><p>Essa ação não poderá ser desfeita.<\/p>                                    <div class="ui right aligned remover button tiny">Sim, remover<\/div>                                <\/div>                            <\/div>                        <\/div>                    <\/div>');$("#txtQtdAlternativas").val($(".ui.alternativas.accordion .title").length);$('[id^="chkAlternativaCorreta"]').off().change(function(){f(this)});$(".ui.alternativas.accordion .remover.button").off().click(function(){s(this)});$(".ui.checkbox").checkbox();$(".ui.alternativas.accordion .button").popup({inline:!0,on:"click",position:"right center"})}function o(){for(var t,r=$(".ui.alternativas.accordion .title"),i=$(".ui.alternativas.accordion .content.segment"),n=0;n<r.length;n++)t=r.eq(n).find("#txtAlternativaIndex").val(),r.eq(n).html('<input id="txtAlternativaIndex" value="'+(n+1)+'" hidden /><i class="dropdown icon"><\/i>Alternativa '+(n+1)+'<div class="ui small label" style="display:none">Correta<\/div>'),i.eq(n).find('input[name="chkAlternativaCorreta'+t+'"]').is(":checked")&&(console.log("entrou"),r.eq(n).find(".label").removeAttr("style")),i.eq(n).find('label[for="txtAlternativaEnunciado'+t+'"]').attr("for","txtAlternativaEnunciado"+(n+1)),i.eq(n).find('label[for="txtAlternativaComentario'+t+'"]').attr("for","txtAlternativaComentario"+(n+1)),i.eq(n).find('label[for="chkAlternativaCorreta'+t+'"]').attr("for","chkAlternativaCorreta"+(n+1)),i.eq(n).find('textarea[name="txtAlternativaEnunciado'+t+'"]').attr("name","txtAlternativaEnunciado"+(n+1)).attr("id","txtAlternativaEnunciado"+(n+1)),i.eq(n).find('textarea[name="txtAlternativaComentario'+t+'"]').attr("name","txtAlternativaComentario"+(n+1)).attr("id","txtAlternativaComentario"+(n+1)),i.eq(n).find('input[name="chkAlternativaCorreta'+t+'"]').attr("name","chkAlternativaCorreta"+(n+1)).attr("id","chkAlternativaCorreta"+(n+1))}function s(n){var r=$(".ui.alternativas.accordion .title").length,t,i;r>2&&(t=$(n).parent().parent().parent().parent(),i=$(t).prev(),i.remove(),t.remove(),o());$("#txtQtdAlternativas").val($(".ui.alternativas.accordion .title").length)}function h(){var t=$("#ddlTiposAnexo").val(),i=$("#ddlTiposAnexo :selected").text(),n=$(".ui.anexos.accordion .title").length+1;t==1&&$(".ui.anexos.accordion").append('                        <div class="title">                            <input id="txtAnexoIndex" value="'+n+'" class="disabled" readonly hidden/>                            <input name="txtAnexoTipo'+n+'" id="txtAnexoTipo'+n+'" value="'+t+'" hidden />                            <i class="dropdown icon"><\/i>Anexo '+n+'                            <span class="ui label" id="txtAnexoTipoDescricao">'+i+'<\/span>                        <\/div>                        <div class="content ui segment">                            <div class="field required">                                <div class="ui card"><div class="image"><img name="preImagem'+n+'" id="preImagem'+n+'" alt="Previsualização" src="" /><\/div>                                <input id="fleAnexo'+n+'" name="fleAnexo'+n+'"type="file" class="ui button" accept="image/*" /><\/div>                            <\/div>                            <div class="field required">                                <label for="txtAnexoLegenda'+n+'">Legenda<\/label>                                <textarea maxlength="250" id="txtAnexoLegenda'+n+'" name="txtAnexoLegenda'+n+'" rows="2" placeholder="Legenda..."><\/textarea>                            <\/div>                            <div class="field">                                <label for="txtAnexoFonte'+n+'">Fonte<\/label>                                <input maxlength="250" type="text" id="txtAnexoFonte'+n+'" name="txtAnexoFonte'+n+'" placeholder="Fonte..."><\/textarea>                            <\/div>                            <div class="field">                                <div class="ui button">                                    Remover                                <\/div>                                <div class="ui special popup">                                    <div class="header">Tem certeza?<\/div>                                    <div class="content"><p>Essa ação não poderá ser desfeita.<\/p>                                    <div class="ui right aligned remover button tiny">Sim, remover<\/div>                                <\/div>                            <\/div>                        <\/div>                    <\/div>');$('.anexos.accordion [id^="fleAnexo"]').off().change(function(){e(this)});$("#txtQtdAnexos").val($(".ui.anexos.accordion .title").length);$(".anexos.accordion .remover.button").off().click(function(){l(this)});$(".ui.anexos.accordion .button").popup({inline:!0,on:"click",position:"right center"})}function c(){for(var r=$(".ui.anexos.accordion .title"),i=$(".ui.anexos.accordion .content.segment"),n=0;n<r.length;n++){var t=r.eq(n).find("#txtAnexoIndex").val(),u=r.eq(n).find("#txtAnexoTipo"+t).val(),f=r.eq(n).find("#txtAnexoTipoDescricao").text();r.eq(n).html('<input id="txtAnexoIndex" value="'+(n+1)+'" class="disabled" readonly hidden/><i class="dropdown icon"><\/i>Anexo '+(n+1)+'<input name="txtAnexoTipo'+(n+1)+'" id="txtAnexoTipo'+(n+1)+'" value="'+u+'" hidden /><span class="ui label" id="txtAnexoTipoDescricao">'+f+"<\/span>");i.eq(n).find('label[for="txtAnexoLegenda'+t+'"]').attr("for","txtAlternativaEnunciado"+(n+1));i.eq(n).find('label[for="txtAnexoFonte'+t+'"]').attr("for","txtAlternativaComentario"+(n+1));i.eq(n).find('textarea[name="txtAnexoLegenda'+t+'"]').attr("name","txtAnexoLegenda"+(n+1)).attr("id","txtAnexoLegenda"+(n+1));i.eq(n).find('input[name="txtAnexoFonte'+t+'"]').attr("name","txtAnexoFonte"+(n+1)).attr("id","txtAnexoFonte"+(n+1));i.eq(n).find('input[name="fleAnexo'+t+'"]').attr("name","fleAnexo"+(n+1)).attr("id","fleAnexo"+(n+1));i.eq(n).find('img[name="preImagem'+t+'"]').attr("name","preImagem"+(n+1)).attr("id","preImagem"+(n+1))}}function l(n){var t=$(n).parent().parent().parent().parent(),i=$(t).prev();i.remove();t.remove();c();$("#txtQtdAnexos").val($(".ui.anexos.accordion .title").length)}function a(){var i,u,f,t,r,n;if($(".ui.error.message .list").html(""),i=!1,$("#ddlDisciplina").val()||$(".ui.error.message .list").append("<li>É necessário selecionar uma disciplina<\/li>"),!$("#ddlTema :selected").length>0&&$(".ui.error.message .list").append("<li>É necessário selecionar pelo menos um tema<\/li>"),$("#ddlDificuldade").val()||$(".ui.error.message .list").append("<li>É necessário selecionar uma dificuldade<\/li>"),$("#ddlTipo").val()||$(".ui.error.message .list").append("<li>É necessário selecionar um tipo<\/li>"),$("#txtEnunciado").val()||$(".ui.error.message .list").append("<li>É necessário preencher o enunciado<\/li>"),$("#ddlTipo").val())if(u=$("#ddlTipo").val(),u==1){for(f=$("#txtQtdAlternativas").val(),t=!0,n=0;n<f;n++)$("#txtAlternativaEnunciado"+(n+1)).val()==""&&(t=!1);if(t){for(t=!1,n=0;n<f;n++)$("#chkAlternativaCorreta"+(n+1)).is(":checked")&&(t=!0);if(t)if($("#chkAnexos").is(":checked")){for(r=$("#txtQtdAnexos").val(),n=0;n<r;n++)$("#fleAnexo"+(n+1))[0].files.length==0&&(t=!1);t?i=!0:$(".ui.error.message .list").append("<li>É necessário selecionar os arquivos dos anexos<\/li>")}else i=!0;else $(".ui.error.message .list").append("<li>É necessário selecionar pelo menos umas das alternativas como correta<\/li>")}else $(".ui.error.message .list").append("<li>É necessário preencher os enunciados de todas as alternativas<\/li>")}else if(u==2)if($("#txtChaveDeResposta").val()!="")if($("#chkAnexos").is(":checked")){for(t=!0,r=$("#txtQtdAnexos").val(),n=0;n<r;n++)$("#fleAnexo"+(n+1))[0].files.length==0&&(t=!1);t?i=!0:$(".ui.error.message .list").append("<li>É necessário selecionar os arquivos dos anexos<\/li>")}else i=!0;else $(".ui.error.message .list").append("<li>É necessário preencher a chave de resposta<\/li>");i?v():$("#frmQuestao").addClass("error")}function v(){var t,i,r,u,n,f;for($("#mdlDisciplina").text($("#ddlDisciplina :selected").text()),$("#mdlDificuldade").text($("#ddlDificuldade :selected").text()),t=$("#ddlTema :selected"),$("#mdlTagTemas").html(""),n=0;n<t.length;n++)$("#mdlTagTemas").append('<div class="ui tag label">'+t.eq(n).text()+"<\/div>");if($("#mdlEnunciado").text($("#txtEnunciado").val()).attr("data-html","<b>Objetivo<\/b>: "+$("#txtObjetivo").val()),i=$("#ddlTipo").val(),i==1){for(r=$("#txtQtdAlternativas").val(),$("#mdlListAlternativas").html(""),n=0;n<r;n++){if($("#chkAlternativaCorreta"+(n+1)).is(":checked")){$("#mdlListAlternativas").append('<div class="item">                                    <div class="middle aligned content" data-html="<b>Comentário<\/b>: '+$("#txtAlternativaComentario"+(n+1)).val()+'">                                        <b>'+(n+1)+"<\/b>) "+$("#txtAlternativaEnunciado"+(n+1)).val()+'<a class="ui green label">Correta<\/a>                                    <\/div>                                <\/div>');continue}$("#mdlListAlternativas").append('<div class="item">                                    <div class="middle aligned content" data-html="<b>Comentário<\/b>: '+$("#txtAlternativaComentario"+(n+1)).val()+'">                                        <b>'+(n+1)+"<\/b>) "+$("#txtAlternativaEnunciado"+(n+1)).val()+"                                    <\/div>                                <\/div>")}$("#mdlChaveDeResposta").attr("style","display:none");$("#mdlListAlternativas").removeAttr("style")}else i==2&&($("#mdlChaveDeResposta").html("<i>"+$("#txtChaveDeResposta").val()+'<\/i><a class="ui green label">Chave de Resposta<\/a>').attr("data-html","<b>Comentário<\/b>: "+$("#txtComentario").val()),$("#mdlListAlternativas").attr("style","display:none"),$("#mdlChaveDeResposta").removeAttr("style"));if($("#chkAnexos").is(":checked")){for(u=$("#txtQtdAnexos").val(),$("#mdlCardAnexos").html(""),n=0;n<u;n++)f=$("#txtAnexoTipo"+(n+1)).val(),f==1&&$("#mdlCardAnexos").append('<div class="ui card">                                        <div class="image">                                            <img src="'+$("#preImagem"+(n+1)).attr("src")+'" />                                        <\/div>                                        <div class="content">                                            <div class="header">                                                '+$("#txtAnexoLegenda"+(n+1)).val()+'                                            <\/div>                                            <div class="description">                                                '+$("#txtAnexoFonte"+(n+1)).val()+"                                            <\/div>                                        <\/div>                                    <\/div>");$("#mdlAccordionAnexos").removeAttr("style")}else $("#mdlAccordionAnexos").attr("style","display:none");$(".ui.confirmar.modal").modal("show");$(".ui.confirmar.modal div").popup()}function y(n){n=n.toLowerCase();n.indexOf(";")>-1?n=n.split(";"):n[0]=n;$(".ui.pesquisa.modal .pesquisar").addClass("loading");$.ajax({type:"POST",data:{palavras:n},url:"/PalavrasChave",success:function(n){if($(".ui.pesquisa.modal .pesquisar").removeClass("loading"),$("#divQuestoes").html(""),n.length!=0){$("#divQuestoes").append('<div class="ui label"> Resultado(s)<div class="detail">'+n.length+"<\/div><\/div>");for(var t=0;t<n.length;t++)$("#divQuestoes").append('                        <div class="item">                            <div class="content">                                <a href="/Historico/Questao/'+n[t].CodQuestao+'" class="header">'+siac.Utilitario.encurtarTextoEm(n[t].Enunciado,140)+'<\/a>                                <div class="description ui labels">                                    <span class="ui label">'+n[t].Disciplina+'<\/span>                                    <span class="ui label">'+n[t].Dificuldade+'<\/span>                                    <span class="ui label">'+n[t].TipoQuestao+'<\/span>                                    <span class="ui label">'+n[t].Professor+"<\/span>                                <\/div>                            <\/div>                        <\/div>                        ")}else $("#divQuestoes").append('                        <div class="item">                            <div class="content">                            <div class="header">Nenhuma questão foi encontrada<\/div>                            <\/div>                        <\/div>                        ');$(".ui.pesquisa.modal").modal("refresh")},error:function(){siac.mensagem("Erro na pesquisa. Por favor, tente novamente.")}})}function p(){$.ajax({type:"GET",data:{captcha:$("#txtCaptcha").val()},url:"/Dashboard/Questao/ChequeCaptcha",success:function(n){n=="true"?($(".ui.pesquisa.modal .pesquisar").removeClass("loading"),$(".ui.confirmar.modal").modal("hide"),$("#txtCaptcha").next().prop("class","checkmark green icon"),$("#frmQuestao").addClass("loading").submit()):($(".ui.pesquisa.modal .pesquisar").removeClass("loading"),$(".ui.confirmar.modal").modal("show"),$("#txtCaptcha").next().prop("class","remove red icon"))},error:function(){$(".ui.pesquisa.modal .pesquisar").removeClass("loading");$("#txtCaptcha").next().prop("class","remove icon");siac.mensagem("Ocorreu um erro ao verificar o captcha.","Resultado do Captcha")}})}function w(){$.ajax({type:"GET",url:"/Dashboard/Questao/NovoCaptcha",success:function(n){n&&$("#imgCaptcha").attr("src","data:image/png;base64,"+n)},error:function(){siac.mensagem("Ocorreu um erro ao atualizar o captcha, tente novamente.","Erro")}})}return{iniciar:r}}();siac.Questao.Detalhe=function(){function n(){$(".ui.accordion").accordion({animateChildren:!1});$("div,p").popup();$(".button").popup({on:"click"});$("a.card").click(function(){$card=$(this);src=$card.find("img").attr("src");legenda=$card.find(".header").text();fonte=$card.find(".description").text();$modal=$(".ui.anexo.modal");$modal.find(".header").text(legenda);$modal.find("img.image").attr("src",src);$modal.find(".description").html(fonte);$modal.modal("show")});$(".arquivar.button").click(function(){var n=this;$(n).addClass("loading");$.ajax({url:"/Historico/Questao/Arquivar/"+$(n).attr("data-questao"),type:"POST",success:function(t){t?$(n).addClass("active").text("Arquivada"):$(n).removeClass("active").text("Arquivar");$(n).removeClass("loading")},error:function(){$(n).removeClass("loading")}})})}return{iniciar:n}}();siac.Questao.Editar=function(){function n(){$(".disabled").parent().popup({html:'<i class="icon red warning"><\/i>Este campo não pode ser modificado',variation:"wide"});$(".ui.checkbox").checkbox();$(".ui.accordion").accordion({animateChildren:!1});$(".ui.modal .ui.accordion").accordion({animateChildren:!1,onChange:function(){$(".ui.confirmar.modal").modal("refresh")}});$(".ui.dropdown").dropdown();$(".tabular.menu .item").tab();$(".cancelar.button").popup({on:"click"});$(".ui.confirmar.modal").modal({onApprove:function(){$("#frmQuestao").addClass("loading").submit()}});$(".prosseguir.button").click(function(){i()})}function t(){var t,r,i,n,u;if($("#mdlEnunciado").text($("#txtEnunciado").val()).attr("data-html","<b>Objetivo<\/b>: "+$("#txtObjetivo").val()),t=$("#frmQuestao").attr("data-questao-tipo"),t==1){for(r=$(".alternativas .title").length,$("#mdlListAlternativas").html(""),n=0;n<r;n++){if($("#chkAlternativaCorreta"+(n+1)).is(":checked")){$("#mdlListAlternativas").append('<div class="item">                                    <div class="middle aligned content" data-html="<b>Comentário<\/b>: '+$("#txtAlternativaComentario"+(n+1)).val()+'">                                        <b>'+(n+1)+"<\/b>) "+$("#txtAlternativaEnunciado"+(n+1)).val()+'<a class="ui green label">Correta<\/a>                                    <\/div>                                <\/div>');continue}$("#mdlListAlternativas").append('<div class="item">                                    <div class="middle aligned content" data-html="<b>Comentário<\/b>: '+$("#txtAlternativaComentario"+(n+1)).val()+'">                                        <b>'+(n+1)+"<\/b>) "+$("#txtAlternativaEnunciado"+(n+1)).val()+"                                    <\/div>                                <\/div>")}$("#mdlChaveDeResposta").attr("style","display:none");$("#mdlListAlternativas").removeAttr("style")}else t==2&&($("#mdlChaveDeResposta").html("<i>"+$("#txtChaveDeResposta").val()+'<\/i><a class="ui green label">Chave de Resposta<\/a>').attr("data-html","<b>Comentário<\/b>: "+$("#txtComentario").val()),$("#mdlListAlternativas").attr("style","display:none"),$("#mdlChaveDeResposta").removeAttr("style"));if(i=$("#frmQuestao").attr("data-questao-anexo"),i>0){for($("#mdlCardAnexos").html(""),n=0;n<i;n++)u=$("#txtAnexoTipo"+(n+1)).val(),u==1&&$("#mdlCardAnexos").append('<div class="ui card">                                        <div class="image">                                            <img src="'+$("#preImagem"+(n+1)).attr("src")+'" />                                        <\/div>                                        <div class="content">                                            <div class="header">                                                '+$("#txtAnexoLegenda"+(n+1)).val()+'                                            <\/div>                                            <div class="description">                                            '+$("#txtAnexoFonte"+(n+1)).val()+"                                            <\/div>                                        <\/div>                                    <\/div>");$("#mdlAccordionAnexos").removeAttr("style")}else $("#mdlAccordionAnexos").attr("style","display:none");$(".ui.confirmar.modal").modal("show");$(".ui.confirmar.modal div").popup()}function i(){var r,u,f,i,n;if($(".ui.error.message .list").html(""),r=!1,u=$("#frmQuestao").attr("data-questao-tipo"),$("#txtEnunciado").val()!="")if(u==1){for(f=$(".alternativas .title").length,i=!0,n=0;n<f;n++)$("#txtAlternativaEnunciado"+(n+1)).val()==""&&(i=!1);if(i){for(i=!1,n=0;n<f;n++)$("#chkAlternativaCorreta"+(n+1)).is(":checked")&&(i=!0);i?r=!0:$(".ui.error.message .list").append("<li>É necessário selecionar pelo menos umas das alternativas como correta<\/li>")}else $(".ui.error.message .list").append("<li>É necessário preencher os enunciados de todas as alternativas<\/li>")}else u==2&&($("#txtChaveDeResposta").val()!=""?r=!0:$(".ui.error.message .list").append("<li>É necessário preencher a chave de resposta<\/li>"));else $(".ui.error.message .list").append("<li>É necessário preencher o enunciado<\/li>");r?t():$("#frmQuestao").addClass("error")}return{iniciar:n}}();siac.Questao.Gerar=function(){function n(){$(".gerar.button").click(function(){t()})}function t(){$("div.ui.form").parent().addClass("loading");strQte=$("#txtQuantidade").val();$.ajax({type:"GET",url:"/Dashboard/Questao/Gerar",data:{strQte:strQte},success:function(n){var t,i;for(console.log(n),$questoes=$("div.questoes"),$questoes.html(""),t=0;t<n.length;t++){for($questao=$('<div class="ui segment"><\/div>'),$labels=$('<div class="ui labels"><\/div>'),$labelProfessor=$('<div class="ui label">                                                Professor                                                <div class="detail">                                                    '+n[t].Professor+"                                                <\/div>                                            <\/div>"),$labelDisciplina=$('<div class="ui label">                                                Disciplina                                                <div class="detail">                                                    '+n[t].Disciplina+"                                                <\/div>                                            <\/div>"),$labelDificuldade=$('<div class="ui label" data-html="<b>Comentário<\/b>: '+n[t].Dificuldade.Comentario+'">                                                Dificuldade                                                <div class="detail">                                                    '+n[t].Dificuldade.Descricao+"                                                <\/div>                                            <\/div>"),$labels.append($labelProfessor).append($labelDisciplina).append($labelDificuldade),i=0;i<n[t].Tema.length;i++)$labels.append($('<div class="ui tag label" data-html="<b>Comentário<\/b>: '+n[t].Tema[i].Comentario+'"><\/div>').text(n[t].Tema[i].Descricao));if($enunciado=$('<div class="ui dividing header" data-html="<b>Objetivo<\/b>: '+n[t].Objetivo+'"><\/div>'),$enunciado.text(n[t].Enunciado),$questao.append($labels),$questao.append($enunciado),n[t].TipoQuestao==1){for($lstAlternativa=$('<div class="ui very relaxed list"><\/div>'),i=0;i<n[t].Alternativa.length;i++)$alternativa=$('<div class="item"><\/div>'),$content=$('<div class="middle aligned content" data-html="<b>Comentário<\/b>: '+n[t].Alternativa[i].Comentario+'">'),$content.append("<b>"+(i+1)+"<\/b>) "),$content.append(n[t].Alternativa[i].Enunciado),n[t].Alternativa[i].FlagGabarito&&n[t].Alternativa[i].FlagGabarito==!0&&$content.append('<a class="ui green label">Correta<\/a>'),$alternativa.append($content),$lstAlternativa.append($alternativa);$questao.append($lstAlternativa)}else $chaveDeResposta=$('<div data-html="<b>Comentário<\/b>: '+n[t].Comentario+'"><\/div>'),$chaveDeResposta.html('<a class="ui green ribbon label">Chave de Resposta<\/a>'+n[t].ChaveDeResposta),$questao.append($chaveDeResposta);$questoes.append($questao)}$("div,p").popup();$("div.ui.form").parent().removeClass("loading")},error:function(){$("div.ui.form").parent().removeClass("loading");siac.mensagem("Erro gerando as questões.")}})}return{iniciar:n}}();