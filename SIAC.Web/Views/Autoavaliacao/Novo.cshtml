
@{
    ViewBag.Title = "Realizar autoavaliação";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


@if (ViewBag.Geradas.Count > 0)
{
    <h2>@ViewBag.Title<a href="@Url.Action("Gerar")" class="ui right floated button">Gerar</a></h2>
    <div class="ui cards">
        @foreach (SIAC.Models.AvalAuto auto in ViewBag.Geradas)
        {
            <div class="card">
                <div class="content">
                    <a href="@Url.Action("Realizar", new { codigo = auto.Avaliacao.CodAvaliacao })" class="header">@auto.Avaliacao.CodAvaliacao</a>
                    <div class="meta">
                        <span>@auto.Avaliacao.DtCadastro.ToElapsedTimeString()</span>
                    </div>

                    <div class="description">
                        <p>
                            <b>Dificuldade</b>: @auto.Dificuldade.Descricao
                        </p>
                        <p>
                            <b>Quantidade de Questões</b>: @auto.Avaliacao.QteQuestoes()
                        </p>
                    </div>
                    
                </div>
                <div class="extra content">
                    <div class="ui labels">
                        @foreach (var disc in auto.Avaliacao.AvaliacaoTema.Select(a => a.Tema.Disciplina).Distinct().ToList())
                    {
                            <div class="ui tag label">@disc.Descricao</div>
                        }
                    </div>
                </div>
                <a href="@Url.Action("Realizar", new { codigo = auto.Avaliacao.CodAvaliacao })" class="ui button">
                    Realizar
                </a>
            </div>
        }
    </div>
}
else
{
    <div class="ui grid row centered">
        <h2 class="ui icon header">
            <i class="icon frown"></i>
            Você não tem autoavaliações salvas
            <div class="sub header">Desejar gerar uma agora? <a href="@Url.Action("Gerar")">Gerar</a></div>
        </h2>
    </div>
}
